Чтобы запретить Ubuntu делать запросы по локальной сети, можно воспользоваться несколькими подходами:

1. **Конфигурация файервола**:
   Используйте `iptables` или `ufw` для блокировки исходящих соединений по локальной сети.

   **Пример с использованием iptables**:
   ```bash
   sudo iptables -A OUTPUT -d 192.168.0.0/16 -j REJECT
   sudo iptables -A OUTPUT -d 10.0.0.0/8 -j REJECT
   sudo iptables -A OUTPUT -d 172.16.0.0/12 -j REJECT
   ```

   **Пример с использованием ufw**:
   ```bash
   sudo ufw deny out to 192.168.0.0/16
   sudo ufw deny out to 10.0.0.0/8
   sudo ufw deny out to 172.16.0.0/12
   ```

2. **Конфигурация сети**:
   Можете настроить маршрутизацию так, чтобы пакеты для локальной сети не выходили.

   **Пример с использованием маршрутизации**:
   ```bash
   sudo ip route add blackhole 192.168.0.0/16
   sudo ip route add blackhole 10.0.0.0/8
   sudo ip route add blackhole 172.16.0.0/12
   ```

3. **Конфигурация DNS**:
   Можете изменить настройки DNS, чтобы не было разрешения локальных адресов.

   **Пример с изменением /etc/hosts**:
   Добавьте в файл `/etc/hosts` строки:
   ```plaintext
   0.0.0.0 192.168.0.0
   0.0.0.0 10.0.0.0
   0.0.0.0 172.16.0.0
   ```

4. **Использование прокси**:
   Настройте систему использовать прокси-сервер, который будет блокировать запросы на локальную сеть.

5. **Изоляция процессов**:
   Можете использовать контейнеры или виртуальные машины, чтобы изолировать процессы и ограничить их доступ к сети.

Каждый из этих методов можно использовать в зависимости от конкретных требований и сценариев.
